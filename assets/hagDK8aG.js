import{e as X,f as U,g as $,h as H,o as p,i as N,a as t,t as M,j as o,c as y,k as P,l as Y,n as V,m as Z,T as W,r as u,p as B,q as T,u as q,F as G,s as J}from"./BHeVE3uC.js";import{_ as F}from"./DlAUqK2U.js";const Q={class:"absolute top-4 left-4 z-10 text-white"},tt={class:"text-sm font-light"},et={class:"text-xs text-white/60"},ot={class:"absolute bottom-4 left-1/2 -translate-x-1/2 z-10 flex items-center gap-2 bg-black/50 backdrop-blur-sm rounded-full px-4 py-2"},st={class:"text-white text-sm font-mono px-2"},nt=["src","alt"],at=X({__name:"ImageLightbox",props:{photos:{},currentIndex:{}},emits:["close","navigate"],setup(C,{emit:v}){const i=C,x=v,r=u(1),g=u(0),w=u(0),s=u(!1),d=u(0),b=u(0),_=u(0),k=u(0),h=B(()=>i.photos[i.currentIndex]),f=B(()=>i.currentIndex>0),c=B(()=>i.currentIndex<i.photos.length-1);U(()=>i.currentIndex,()=>{e()});function e(){r.value=1,g.value=0,w.value=0}function m(){r.value=Math.min(r.value+.5,5)}function l(){r.value=Math.max(r.value-.5,.5),r.value===1&&(g.value=0,w.value=0)}function z(){f.value&&x("navigate",i.currentIndex-1)}function j(){c.value&&x("navigate",i.currentIndex+1)}function I(){x("close")}function E(n){r.value<=1||(s.value=!0,n instanceof MouseEvent?(d.value=n.clientX,b.value=n.clientY):(d.value=n.touches[0].clientX,b.value=n.touches[0].clientY),_.value=g.value,k.value=w.value)}function D(n){if(!s.value)return;n.preventDefault();let a,S;n instanceof MouseEvent?(a=n.clientX,S=n.clientY):(a=n.touches[0].clientX,S=n.touches[0].clientY);const O=a-d.value,K=S-b.value;g.value=_.value+O,w.value=k.value+K}function L(){s.value=!1}function R(n){switch(n.key){case"Escape":I();break;case"ArrowLeft":z();break;case"ArrowRight":j();break;case"+":case"=":m();break;case"-":case"_":l();break;case"0":e();break}}function A(n){n.preventDefault(),n.deltaY<0?m():l()}return $(()=>{document.addEventListener("keydown",R),document.body.style.overflow="hidden"}),H(()=>{document.removeEventListener("keydown",R),document.body.style.overflow=""}),(n,a)=>(p(),N(W,{to:"body"},[t("div",{class:"fixed inset-0 z-[100] bg-black/95 flex items-center justify-center",onClick:Y(I,["self"])},[t("button",{onClick:I,class:"absolute top-4 right-4 z-10 w-12 h-12 flex items-center justify-center text-white/80 hover:text-white hover:bg-white/10 rounded-full transition-all","aria-label":"Close"},[...a[0]||(a[0]=[t("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),t("div",Q,[t("p",tt,M(o(h).key),1),t("p",et,M(C.currentIndex+1)+" / "+M(C.photos.length),1)]),t("div",ot,[t("button",{onClick:l,class:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-full transition-colors","aria-label":"Zoom out"},[...a[1]||(a[1]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM13 10H7"})],-1)])]),t("span",st,M(Math.round(o(r)*100))+"%",1),t("button",{onClick:m,class:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-full transition-colors","aria-label":"Zoom in"},[...a[2]||(a[2]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})],-1)])]),t("button",{onClick:e,class:"w-10 h-10 flex items-center justify-center text-white hover:bg-white/10 rounded-full transition-colors ml-2","aria-label":"Reset zoom"},[...a[3]||(a[3]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])])]),o(f)?(p(),y("button",{key:0,onClick:z,class:"absolute left-4 top-1/2 -translate-y-1/2 z-10 w-14 h-14 flex items-center justify-center text-white/80 hover:text-white hover:bg-white/10 rounded-full transition-all","aria-label":"Previous photo"},[...a[4]||(a[4]=[t("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])])):P("",!0),o(c)?(p(),y("button",{key:1,onClick:j,class:"absolute right-4 top-1/2 -translate-y-1/2 z-10 w-14 h-14 flex items-center justify-center text-white/80 hover:text-white hover:bg-white/10 rounded-full transition-all","aria-label":"Next photo"},[...a[5]||(a[5]=[t("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])])):P("",!0),t("div",{class:"relative w-full h-full flex items-center justify-center overflow-hidden",onWheel:Y(A,["prevent"])},[t("img",{src:o(h).url,alt:o(h).key,class:Z(["max-w-full max-h-full object-contain select-none transition-transform",{"cursor-grab":o(r)>1&&!o(s),"cursor-grabbing":o(s)}]),style:V({transform:`scale(${o(r)}) translate(${o(g)/o(r)}px, ${o(w)/o(r)}px)`,transformOrigin:"center center"}),draggable:"false",onMousedown:E,onMousemove:D,onMouseup:L,onMouseleave:L,onTouchstart:E,onTouchmove:D,onTouchend:L},null,46,nt)],32),a[6]||(a[6]=t("div",{class:"absolute bottom-4 right-4 z-10 text-white/50 text-xs font-light hidden lg:block"},[t("p",null,"← → Navigate | + - Zoom | 0 Reset | ESC Close")],-1))])]))}}),rt=Object.assign(F(at,[["__scopeId","data-v-c527be13"]]),{__name:"ImageLightbox"});function lt(){const C="https://photo-sync-dropbox.s3.us-east-1.amazonaws.com/",v=u([]),i=u(!1),x=u(null);function r(s){const d=[],b=/<Contents>([\s\S]*?)<\/Contents>/g,_=/<Key>(.*?)<\/Key>/,k=/<LastModified>(.*?)<\/LastModified>/,h=/<Size>(.*?)<\/Size>/,f=/<ETag>(.*?)<\/ETag>/;let c;for(;(c=b.exec(s))!==null;){const e=c[1],m=e.match(_),l=e.match(k),z=e.match(h),j=e.match(f);if(m&&m[1]){const I=m[1];d.push({key:I,url:`${C}${encodeURIComponent(I)}`,lastModified:l?l[1]:new Date().toISOString(),size:z?parseInt(z[1]):0,etag:j?j[1].replace(/"/g,""):""})}}return d}async function g(){i.value=!0,x.value=null;try{const s=await fetch(C);if(!s.ok)throw new Error(`Failed to fetch S3 bucket: ${s.statusText}`);const d=await s.text(),b=r(d),_=[".jpg",".jpeg",".png",".gif",".webp",".heic",".heif"],k=b.filter(h=>{const f=h.key.toLowerCase().substring(h.key.lastIndexOf("."));return _.includes(f)});k.sort((h,f)=>new Date(f.lastModified).getTime()-new Date(h.lastModified).getTime()),v.value=k}catch(s){console.error("Error fetching photos from S3:",s),x.value=s.message||"Failed to load photos",v.value=[]}finally{i.value=!1}}async function w(){await g()}return{photos:T(v),loading:T(i),error:T(x),fetchPhotos:g,refresh:w}}const it=globalThis.setInterval,ct={class:"min-h-screen bg-white"},ut={id:"gallery",class:"px-4 sm:px-6 lg:px-8 pb-20 pt-20"},dt={class:"max-w-7xl mx-auto"},ht={key:0,class:"text-center py-20"},ft={key:1,class:"text-center py-20"},gt={class:"text-sm text-gray-500 mt-2"},mt={key:2,class:"text-center py-20"},pt={key:3,class:"columns-1 sm:columns-2 lg:columns-3 gap-4 space-y-4"},vt=["onClick"],xt={class:"relative overflow-hidden bg-gray-100 transition-all duration-300 hover:shadow-2xl"},wt=["src","alt"],bt={class:"absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"},kt={class:"absolute bottom-0 left-0 right-0 p-4 text-white"},yt={class:"text-sm font-light truncate"},_t={class:"text-xs text-gray-300 mt-1"},Mt={class:"border-t border-gray-100 px-4 sm:px-6 lg:px-8 py-8"},Ct={class:"max-w-7xl mx-auto text-center text-sm text-gray-500 font-light"},zt=X({__name:"index",setup(C){const{photos:v,loading:i,error:x,fetchPhotos:r,refresh:g}=lt(),w=B(()=>v.value.length>0);$(async()=>{await r()});const s=u(!1),d=u(0);function b(c){d.value=c,s.value=!0}function _(){s.value=!1}function k(c){d.value=c}const h=c=>{if(c===0)return"0 B";const e=1024,m=["B","KB","MB","GB"],l=Math.floor(Math.log(c)/Math.log(e));return Math.round(c/Math.pow(e,l)*100)/100+" "+m[l]},f=u(null);return $(()=>{f.value=it(()=>{g()},300*1e3)}),H(()=>{f.value&&clearInterval(f.value)}),q({title:"Brennan's Photography",meta:[{name:"description",content:"A clean photography portfolio showcasing beautiful moments"}]}),(c,e)=>{const m=rt;return p(),y("div",ct,[e[5]||(e[5]=t("header",{class:"fixed top-0 left-0 right-0 z-50 bg-white/90 backdrop-blur-sm border-b border-gray-100"},[t("nav",{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center justify-between"},[t("h1",{class:"text-2xl font-light tracking-wide text-gray-900"}," Brennan's Photography ")])],-1)),t("section",ut,[t("div",dt,[o(i)?(p(),y("div",ht,[...e[1]||(e[1]=[t("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"},null,-1),t("p",{class:"mt-4 text-gray-600 font-light"},"Loading photos from S3...",-1)])])):o(x)?(p(),y("div",ft,[e[2]||(e[2]=t("p",{class:"text-red-600 font-light"},"Error loading photos from S3",-1)),t("p",gt,M(o(x)),1),t("button",{onClick:e[0]||(e[0]=l=>o(g)()),class:"mt-4 px-6 py-2 bg-gray-900 text-white rounded hover:bg-gray-800 transition-colors"}," Retry ")])):o(w)?(p(),y("div",pt,[(p(!0),y(G,null,J(o(v),(l,z)=>(p(),y("div",{key:l.key,class:"break-inside-avoid group cursor-pointer",onClick:j=>b(z)},[t("div",xt,[t("img",{src:l.url,alt:l.key,class:"w-full h-auto object-cover group-hover:scale-105 transition-transform duration-500",loading:"lazy"},null,8,wt),t("div",bt,[t("div",kt,[t("p",yt,M(l.key),1),t("p",_t,M(h(l.size)),1)])]),e[4]||(e[4]=t("div",{class:"absolute top-2 right-2 w-8 h-8 bg-black/50 backdrop-blur-sm rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"},[t("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})])],-1))])],8,vt))),128))])):(p(),y("div",mt,[...e[3]||(e[3]=[t("svg",{class:"w-16 h-16 mx-auto text-gray-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),t("p",{class:"text-gray-600 font-light"},"No photos found in S3 bucket",-1),t("p",{class:"text-sm text-gray-400 mt-2"},"Upload photos to your Dropbox folder to sync them",-1)])]))])]),t("footer",Mt,[t("div",Ct,[t("p",null,"© "+M(new Date().getFullYear())+" Brennan. All rights reserved.",1)])]),o(s)&&o(v).length>0?(p(),N(m,{key:0,photos:o(v),"current-index":o(d),onClose:_,onNavigate:k},null,8,["photos","current-index"])):P("",!0)])}}}),Bt=F(zt,[["__scopeId","data-v-a7957658"]]);export{Bt as default};
